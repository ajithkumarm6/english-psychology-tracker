<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#1A73E8" />
  <title>My English Workbook</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 16px;
      background: #fefefe;
      color: #333;
    }
    h2, h3 {
      color: #1A73E8;
    }
    textarea {
      width: 100%;
      min-height: 80px;
      margin-bottom: 16px;
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #1A73E8;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      margin: 5px 5px 10px 0;
    }
    button:hover {
      background: #0f5bd8;
    }
    .small { font-size: 14px; color: #777; }
  </style>
</head>
<body>

<h2>üìò My English Workbook ‚Äì <span id="day-info"></span></h2>
<p class="small" id="task-title"></p>
<p class="small">üìÖ <span id="today-date"></span></p>
<hr />

<h3>üü¢ Daily Practice</h3>
<textarea id="entry" placeholder="Write here your answers for today...\n- What are you grateful for?\n- What video/topic did you listen to?\n- 5 Words or phrases?\n- Your speaking practice?\n- Challenge answer and any mistakes?\n... Everything in one place!"></textarea>

<h3>‚úÖ Feedback Prompt</h3>
<textarea readonly id="feedback-prompt"></textarea>

<h3>üß† Practice Prompt</h3>
<textarea readonly id="workbook-prompt"></textarea>

<button onclick="markComplete()">‚úîÔ∏è Mark Complete</button>
<button onclick="prevDay()">‚¨ÖÔ∏è Previous Day</button>
<button onclick="nextDay()">Next Day ‚û°Ô∏è</button>
<button onclick="exportPDF()">üìÑ Export to PDF</button>

<script>
const tasks = [
  { title: "Day 1: Self-Reflection in English", desc: "Journal your feelings, describe your day." },
  { title: "Day 2: Shadow a TED Talk", desc: "Mimic native speech from a TED clip." },
  { title: "Day 3: Describe Your Room", desc: "Practice describing your surroundings." },
  { title: "Day 4: Real-Life Dialogue Simulation", desc: "Repeat both characters from a short video." },
  { title: "Day 5: Story Retelling", desc: "Retell a video story in your own words." },
  { title: "Day 6: Tongue Twisters", desc: "Practice fast, tricky sentences." },
  { title: "Day 7: Movie Clip Dubbing", desc: "Mute and dub a movie scene in English." },
  { title: "Day 8: English Rant", desc: "Rant about your day or annoyances in English." },
  { title: "Day 9: 3-Minute Challenge", desc: "Talk for 3 minutes without stopping." },
  { title: "Day 10: Mimic Emotions", desc: "Match the emotion and tone from a native speaker." },
  { title: "Day 11: Speak Like a Teacher", desc: "Teach a simple topic in English." },
  { title: "Day 12: WhatsApp Voice Notes", desc: "Record yourself talking like a message to a friend." },
  { title: "Day 13: Debate Practice", desc: "Argue a topic from both sides." },
  { title: "Day 14: Podcast + 5 Facts", desc: "Listen to a podcast, write 5 facts." },
  { title: "Day 15: Emoji Story Day", desc: "Create a story using emojis as prompts." },
  { title: "Day 16: Job Interview Role-Play", desc: "Answer common job interview questions." },
  { title: "Day 17: Fix My English", desc: "Review your video for grammar mistakes." },
  { title: "Day 18: React to Funny Video", desc: "Watch a funny clip and explain your reaction." },
  { title: "Day 19: Mystery Object Game", desc: "Describe an object without naming it." },
  { title: "Day 20: Describe Last Video", desc: "Retell a video you watched recently." },
  { title: "Day 21: Talk with AI (Voice Mode)", desc: "Have a full spoken conversation using AI." },
  { title: "Day 22: Audio Diary Entry", desc: "Speak about your full day and emotions." },
  { title: "Day 23: Translate Emotion", desc: "Describe an emotional clip or scene." },
  { title: "Day 24: Would You Rather Game", desc: "Answer with full explanations." },
  { title: "Day 25: Give Life Advice", desc: "Pretend to help someone with a problem." },
  { title: "Day 26: Describe a Dream", desc: "Share a weird or fun dream." },
  { title: "Day 27: Voice Note Swap", desc: "Exchange feedback with a partner or AI." },
  { title: "Day 28: Create a Mini Story", desc: "Invent and speak a short story." },
  { title: "Day 29: React to News Headline", desc: "Share your opinion on a real headline." },
  { title: "Day 30: Your Fluency Show!", desc: "Record a full 3-minute natural talk." }
];

let currentDay = parseInt(localStorage.getItem('currentDay')) || 1;

function loadDay() {
  const task = tasks[currentDay - 1];
  document.getElementById('day-info').innerText = `Day ${currentDay}`;
  document.getElementById('today-date').innerText = new Date().toDateString();
  document.getElementById('task-title').innerText = `${task.title}: ${task.desc}`;
  const entryKey = `day${currentDay}-entry`;
  document.getElementById('entry').value = localStorage.getItem(entryKey) || '';

  document.getElementById('feedback-prompt').value =
`‚úÖ Please analyze:
What mistakes did I make in each part?
Corrected sentences with explanation
How can I improve next time?
üéØ Help me become fluent and accurate step by step. Don‚Äôt skip small errors. Give me structured corrections and learning tips.`;

  document.getElementById('workbook-prompt').value =
`üìò Based on my mistakes today, please create a short personalized workbook exercise:
- Fill in the blanks
- Choose the correct option
- Rewrite the incorrect sentences
Make sure it‚Äôs based on MY mistakes only, not generic.`;
}

function markComplete() {
  localStorage.setItem(`day${currentDay}-entry`, document.getElementById('entry').value);
  alert('‚úÖ Saved! Day marked complete.');
}

function nextDay() {
  if (currentDay < 30) {
    currentDay++;
    localStorage.setItem('currentDay', currentDay);
    loadDay();
  }
}
function prevDay() {
  if (currentDay > 1) {
    currentDay--;
    localStorage.setItem('currentDay', currentDay);
    loadDay();
  }
}

function exportPDF() {
  const text = `My English Workbook ‚Äì Day ${currentDay}\n\n${document.getElementById('task-title').innerText}\n\n---\n\n${document.getElementById('entry').value}\n\n---\nFeedback Prompt:\n${document.getElementById('feedback-prompt').value}\n\nPractice Prompt:\n${document.getElementById('workbook-prompt').value}`;

  const blob = new Blob([text], { type: 'application/pdf' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `EnglishWorkbook-Day${currentDay}.pdf`;
  link.click();
}

window.onload = loadDay;
</script>

</body>
</html>
