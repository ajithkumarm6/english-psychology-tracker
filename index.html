<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Daily English Workbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background: #ffffff;
      color: #222;
      margin: 0;
      padding: 1em;
      max-width: 100%;
    }

    h2, h3 {
      color: #007BFF;
      font-size: 1.3em;
    }

    textarea {
      width: 100%;
      min-height: 120px;
      margin-bottom: 20px;
      padding: 10px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 10px;
      resize: vertical;
    }

    button {
      background: #007BFF;
      color: white;
      border: none;
      padding: 12px;
      margin: 8px 4px 16px 0;
      border-radius: 8px;
      font-size: 1em;
      width: 48%;
    }

    button:hover {
      background: #0056b3;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .small {
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>

  <h2>üìò English Workbook ‚Äì <span id="day-label"></span></h2>
  <p class="small">üìÖ <span id="date-label"></span></p>
  <p id="task-info"></p>

  <textarea data-key="warmup" placeholder="üü¢ Part 1 ‚Äì Warm-Up"></textarea>
  <textarea data-key="listening" placeholder="üü¢ Part 2 ‚Äì Listening Practice"></textarea>
  <textarea data-key="speaking" placeholder="üü¢ Part 3 ‚Äì Speaking Practice"></textarea>
  <textarea data-key="challenge" placeholder="üü¢ Part 4 ‚Äì Fun Practice Challenge"></textarea>
  <textarea data-key="analyze" placeholder="üü¢ Analyze Your Practice / Ask for Feedback"></textarea>

  <div class="row">
    <button onclick="prevDay()">‚¨ÖÔ∏è Back</button>
    <button onclick="nextDay()">Next ‚û°Ô∏è</button>
    <button onclick="markComplete()">‚úÖ Done</button>
    <button onclick="exportText()">üìÑ Export .txt</button>
  </div>

  <script>
    const tasks = [
      { title: "Day 1: Self-Reflection", desc: "Write about your day in English." },
      { title: "Day 2: TED Talk Shadowing", desc: "Repeat a native speaker from a video." },
      { title: "Day 3: Describe Your Room", desc: "Practice describing objects around you." },
      { title: "Day 4: Dialogue Simulation", desc: "Repeat both parts of a short dialogue." },
      { title: "Day 5: Story Retelling", desc: "Watch and retell a short story." },
      // ... Add more up to Day 30
    ];

    let currentDay = parseInt(localStorage.getItem('mobileCurrentDay') || '1');
    let completed = JSON.parse(localStorage.getItem('mobileCompleted') || '[]');

    function loadDay() {
      if (currentDay < 1) currentDay = 1;
      if (currentDay > tasks.length) currentDay = tasks.length;

      document.getElementById("day-label").innerText = `Day ${currentDay}`;
      document.getElementById("date-label").innerText = new Date().toDateString();

      const task = tasks[currentDay - 1] || { title: "Day", desc: "Custom Task" };
      document.getElementById("task-info").innerHTML = `<strong>${task.title}</strong>: ${task.desc}`;

      document.querySelectorAll("textarea").forEach(textarea => {
        const key = `m-day${currentDay}-${textarea.dataset.key}`;
        textarea.value = localStorage.getItem(key) || "";
        textarea.oninput = () => localStorage.setItem(key, textarea.value);
      });

      localStorage.setItem('mobileCurrentDay', currentDay);
    }

    function prevDay() {
      if (currentDay > 1) {
        currentDay--;
        loadDay();
      }
    }

    function nextDay() {
      if (!completed.includes(currentDay)) {
        alert("‚úîÔ∏è Please mark the day as done before continuing.");
        return;
      }
      if (currentDay < tasks.length) {
        currentDay++;
        loadDay();
      }
    }

    function markComplete() {
      if (!completed.includes(currentDay)) {
        completed.push(currentDay);
        localStorage.setItem('mobileCompleted', JSON.stringify(completed));
        alert("üéâ Day marked as done!");
      }
    }

    function exportText() {
      const sections = document.querySelectorAll("textarea");
      let content = `üìò English Practice ‚Äì Day ${currentDay}\n${new Date().toDateString()}\n\n`;

      sections.forEach(area => {
        const label = area.placeholder;
        content += `üîπ ${label}\n${area.value.trim() || '[Empty]'}\n\n`;
      });

      const blob = new Blob([content], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `english-day${currentDay}.txt`;
      link.click();
    }

    loadDay();
  </script>
</body>
</html>





